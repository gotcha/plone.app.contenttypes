<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
    xmlns:tal="http://xml.zope.org/namespaces/tal"
    xmlns:metal="http://xml.zope.org/namespaces/metal"
    xmlns:i18n="http://xml.zope.org/namespaces/i18n"
    lang="en"
    metal:use-macro="context/@@main_template/macros/master"
    i18n:domain="plone">
<body>

<metal:content-core fill-slot="content-core">
<metal:block define-macro="content-core"
             tal:define="content_type python: context.file.contentType;
                         filename python: context.file.filename;
                         mimetype_icon python: 'mimetype-' + content_type;
                         download_url python: '{}/@@download/file/{}'.format(context.absolute_url(), filename)">

  <section class="section section-main">
    <div>
      <tal:icon tal:replace="structure python:icons.tag(mimetype_icon, tag_class='icon-x4 mb-2')" />
    </div>
    <div class="h5 mb-2">
      <a href="${python:download_url}" tal:content="python: filename">Filename</a>
    </div>
    <div class="metadata d-flex justify-content-center text-muted small">
      <div class="px-2">
        <tal:icon tal:replace="structure python:icons.tag(mimetype_icon, tag_class='icon-inline', tag_alt=content_type)" />
        <span tal:replace="python: content_type">image/jpeg</span>
      </div>
      <div class="px-2">
        <tal:icon tal:replace="structure python:icons.tag('file-binary', tag_class='icon-inline', tag_alt='Size')" />
        <span tal:define="size python: context.file.getSize()" tal:content="python: size">1000</span> kB
      </div>
    </div>
  </section>

  <section class="section section-actions">
    <a class="btn btn-primary download" href="${python:download_url}">Download</a>
  </section>

  <section id="section-video" class="content-section" tal:condition="python: view.is_videotype()">

    <header>
      <span class="section-header" i18n:translate="heading_file_video">Video</span>
    </header>

    <video class="w-100" controls="controls">
      <source src="${python:download_url}" type="${python:content_type}"></source>
      <tal:translation i18n:translate="embedded_video_not_supported">Sorry, your browser doesn't support embedded videos.</tal:translation>
    </video>

  </section>

  <section class="section section-content section-audio" tal:condition="python: view.is_audiotype()">

    <header>
      <span i18n:translate="heading_file_audio">Audio</span>
    </header>

    <audio class="w-100" controls="controls">
      <source tal:attributes="src python: download_url; type python: content_type"></source>
      <tal:translation i18n:translate="embedded_audio_not_supported">Sorry, your browser doesn't support embedded audio.</tal:translation>
    </audio>

  </section>

  <section class="section section-content section-filecontent" tal:condition="python: content_type.startswith('text')">

    <header>
     <span i18n:translate="heading_file_contents">File contents</span>
    </header>

    <div class="card">
      <div class="card-body">
        <pre tal:content="python: getattr(context.file, 'data', None)" />
      </div>
    </div>

  </section>

</metal:block>
</metal:content-core>

</body>
</html>
